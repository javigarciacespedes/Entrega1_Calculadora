<!DOCTYPE html>
<html>
<head>
  <title>Calculadora</title>
  <meta charset="utf-8">
  <script type="text/javascript">

  let suma=undefined;
  let producto=undefined;
  let text = document.getElementById("info");

    const vaciar = () => {
      document.getElementById("pantalla").value = "";
    }

    function rellenar_info(){
      let num = document.getElementById("pantalla").value;
      if(num<100){
        text="El número es menor que 100";
      }
      if(num>100 && num<200){
        text="El número está entre 100 y 200";
      }
      if(num>200){
        text="El número es mayor que 200";
      }
      return text.value;
    }

    const cuadrado = () => {
      validar();
      let num = document.getElementById("pantalla");
      num.value = num.value * num.value;
      rellenar_info();
    }

    function mod(){ //Function mod(), returns the module of a number
      let num = document.getElementById("pantalla");
      validar();
      if(num.value>=0){
        num.value = num.value;
      }
      else{
        num.value = -num.value;
      }
      rellenar_info();
      return num.value;
    }
    
    function fact(){ //Function fact(), returns the factorial of a number
      let num = document.getElementById("pantalla");
      validar();
      let data = 1;
      for(i = 1; i<=num.value; i++){
      data = data * i;
      }
      num.value = data;
      rellenar_info();
      return num.value;
    }

    function add(){ //Function add(), saves the first data to then add it
      validar();
      suma=document.getElementById("pantalla");
    }

    function mul(){ //Function mult(), saves the first data to then mult it
      validar();
      producto=document.getElementById("pantalla").value;
    }

    function eq(){ //Function eq(), adds or multiplies the second data with the first data previously saved
      let num=document.getElementById("pantalla");
      validar();
      if(suma!=undefined){
        num.value=(suma.value)+(num.value);
        suma=undefined;
        rellenar_info();
        return num;
      }
      if(producto!=undefined){
        num.value=num.value*producto;
        producto=undefined;
        rellenar_info();
        return num;  
      }
    }

    function sumatorio(){ //Function sumatorio(), adds all the elements from a string
      let num = document.getElementById("pantalla");
      validar();
      let list = num.value.split(","); //Transforms the numbers from the text box into an array with its number separated by comas
      let i=0, acc=0;
      while(i<list.length){
        acc+= +list[i++];
      }
      num.value = acc;
    }

    function ordenar(){ //Function ordenar(), sorts the numbers
      validar();
      let num = document.getElementById("pantalla");
      let list = num.value.split(",");
      let ord = list.sort(); //Sorts the numbers
      num.value = ord;
    }

    function revertir(){ //Function revertir(), turns the array upside down
      validar();
      let num = document.getElementById("pantalla");
      let list = num.value.split(",");
      let rev = list.reverse(); //Turns the array upside down
      num.value = rev;
    }

    function quitar(){ //Function quitar(), removes the last item from the array
      validar();
      let num = document.getElementById("pantalla");
      let list = num.value.split(",");
      let quit = list.pop(); //Removes the last item from the array
      num.value = list;
    }

    function validar(){ //Function  validar(), filter that pops up with an error message if the input data isnt the right one
      let num = document.getElementById("pantalla").value;
      if(num % 1 === 0 || num % 1 === 1){
        return num;
      }
      else{
        num.value="Error";
        return num;
      } 
    }
  </script>
</head>


<body>
  <h1>Calculadora de CORE </h1>
  Número: <input type="text" id="pantalla" onclick="vaciar()">
  <h2 id="info" class="grande"  title="Info sobre el número" onchange="rellenar_info()"> Info sobre el número</h2>
  <h3>Operaciones unitarias</h3>
  <button id="cuadrado" onclick="cuadrado()">x<sup>2</sup></button>
  <button id="modulo" onclick="mod()">Mod</button>
  <button id="factorial" onclick="fact()">n!</button>
  <h3>Operaciones binarias</h3>
  <button id="suma" onclick="add()">+</button>
  <button id="multiplicacion" onclick="mul()">*</button>
  <button id="igual" onclick="eq()">=</button>
  <h3>Operaciones CSV</h3>
  <button id="sumatorio" onclick="sumatorio()">Σx</button>
  <button id="ordenar" onclick="ordenar()">ordenar</button>
  <button id="revertir" onclick="revertir()">revertir</button>
  <button id="quitar" onclick="quitar()">quitar</button>
 </body>
</html>


